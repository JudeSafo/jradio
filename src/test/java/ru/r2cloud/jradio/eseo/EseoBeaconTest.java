package ru.r2cloud.jradio.eseo;

import static org.junit.Assert.assertEquals;

import java.io.IOException;

import org.junit.Test;

import ru.r2cloud.jradio.fec.ViterbiTest;

public class EseoBeaconTest {

	@Test
	public void testType1() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA9861E4FFF0037AF20F34D0000000000000000000000000000000000000000000000000000B003F00000000000300000000000000FFFFBF11010187AABD1F8E093FAF87BBBD9FFFA4FF94FF69FF53FF96FF8B610000E0FF01B30000420C0000B20000420C000050550F0050540F0000000000000000000000000070107000000000");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type1 type1 = b.getType1();
		assertEquals(15, type1.getOBD_ACTIVE_TASK());
		assertEquals(24971, type1.getPM_Voltage_Mb());
	}
	
	@Test
	public void testType2() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA986132FFF0047ADA65E5655566606610622D015F0066001E001E00EA030C0076FF3A00FB018EFF94FF98FF85FF8DFF92FF9A009B00990094009C009600606100AAB100A20007005E0002000000200000008000020001000200000001000100130062000100000000000100690000000000010000003FD0000200E0FF0100000000");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type2 type2 = b.getType2();
		assertEquals(12, type2.getPM_Shunt_section_6());
		assertEquals(24928, type2.getPM_Voltage_Mb());
	}
	
	@Test
	public void testType3() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA9861B8FFF0057AF2F20F34D00000FFF7FFFF000000004303230300000000000000000070100000000000000000000040007ECE7F0E00000000000C0F0E000000000000B8009C00DF00A2009B009A00A3009C00A300AF009A0000000000004000000B003F00000000000300000000000000FFFFBF11000000000000000000000000");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type3 type3 = b.getType3();
		assertEquals(950222L, type3.getOBD_POWER_TIME());
		assertEquals(15.4f, type3.getOBD_TEMP15_MMR(), 0.000001f);
	}
	
	@Test
	public void testType4() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA986152FFF0067A0101C3000000DADB873DF3A4913C8E66B93D87577E3FFB766ABF12C62A3DECA404C034350B45F2EAFAC340B7CC45D48DE1C01F78CCBFDDF91040A0FA0D00000000000000000000000000E200C500C600BA00D000E000C700C600BE00D0006F003A00000000000000000000000000000000000000000066016002");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type4 type4 = b.getType4();
		assertEquals(22.6f, type4.getSSM_uC_PCB_TEMP(), 0.0f);
		assertEquals(5.8f, type4.getESE_TAU_TEMP(), 0.0f);
	}
	
	@Test
	public void testType5() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA986160FFF0077700000000000000000000000000000000000000000000000000000040000000000000000000000B003F00000000000300000000000000000000000000C3000000000000008061003FD0000200000000B36BB76C0000001B01A000D6420C0000B26BB64B000000E4008B00D6420C00000000000000000000");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type5 type5 = b.getType5();
		assertEquals(24960, type5.getPM_Voltage_Mb());
		assertEquals(-672.0f, type5.getTTR_RX_AFC(), 0.0f);
	}

	@Test
	public void testType6() throws IOException {
		byte[] data = ViterbiTest.hexStringToByteArray("8AA68A9E40406092AE6888AA98610AFFF0087A0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
		EseoBeacon b = new EseoBeacon();
		b.readExternal(data);
		Type6 type6 = b.getType6();
		assertEquals(-40.0f, type6.getTRI_TMPPSU(), 0.0f);
		assertEquals(0, type6.getADE_In_Omega());
	}

}
